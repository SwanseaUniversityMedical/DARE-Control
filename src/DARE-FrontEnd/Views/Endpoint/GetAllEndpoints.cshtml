@model List<BL.Models.Tre>
@{
    ViewData["Title"] = "TREs";
    var endpointsCount = Model.Count;


}
<div class="container-lg p-4">
    <div class="d-flex align-items-center justify-content-between">
        <h1 class="fs-3 mb-0">Trusted Research Environments</h1>
        <a asp-controller="Endpoint" asp-action="AddEndpoint" class="btn btn-primary btn-sm d-flex align-items-center">
            <i class="fa fa-plus align-middle me-2"></i>
            <span>Create New TRE</span>
        </a>
    </div>
    <hr class="d-flex my-4">
    <div class="table-responsive">
        <table id="projectList" class="table table-bordered table-striped no-head" caption="List of TREs">
            <thead><tr><td>TRE</td></tr></thead>
            <tbody>
                @foreach (var endpoint in Model)
                {
                    <tr>
                        <td class="card mb-2 p-3 bg-white shadow-sm border-1">

                            <div class="d-flex align-items-center justify-content-between mb-3">
                                <div>
                                    <a href="@Url.Action("GetAnEndpoint", "Endpoint", new { id = endpoint.Id })">
                                        <h2 class="mb-0 fw-bold hover-underline fs-5">
                                            @endpoint.Name
                                        </h2>
                                    </a>
                                    @*<p class="text-muted small mb-0">#@endpoint.Id</p>*@
                                </div>
                                <a href="@Url.Action("AddEndpoint", "Endpoint",new{endpointId=endpoint.Id})" class="btn btn-sm btn-outline-primary"><span class="small">Edit</span></a>
                            </div>
                            <div class="">
                                <a href="@Url.Action("GetAnEndpoint", "Endpoint", new { id = endpoint.Id })#projects" class="badge py-2 px-3 badge-lg bg-grey text-dark rounded-pill">
                                    Used By @endpoint.Projects.Count Projects
                                </a>
                                <a href="@Url.Action("GetAnEndpoint", "Endpoint", new { id = endpoint.Id })#submissions" class="badge py-2 px-3 badge-lg bg-grey text-dark rounded-pill">
                                    Run @endpoint.Submissions.Count Submissions
                                </a>
                            </div>
                            <p class="my-4">
                                @endpoint.About
                                @*TRE Name has a rich history and we are constantly evolving to provide word-leading support for research communities to access, link and analyse routinely collected health and administrative data within a safe and secure remote access environment....*@
                            </p>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>